<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">

<!-- KHÃ”NG ZOOM TRÃŠN MOBILE -->
<meta name="viewport"
      content="width=device-width, initial-scale=1.0,
               maximum-scale=1.0, user-scalable=no">

<title>PICKLEBALL SCORE - Äá»¨C TRá»ŒNG</title>

<style>
    body{
        font-family: Arial, sans-serif;
        margin:0; padding:10px;
        background:#f0f0f0;
    }
    h1{
        text-align:center;
        color:#005bbb;
        text-shadow:0 0 5px #aaddff;
        margin-bottom:10px;
    }

    .settings{
        background:white;
        padding:10px;
        border-radius:10px;
        margin-bottom:10px;
        box-shadow:0 0 5px #0002;
    }
    .settings input, .settings select{
        width:100%; padding:6px; margin:4px 0;
        border-radius:6px; border:1px solid #ccc;
    }

    .court{
        width:100%;
        max-width:600px;
        margin:0 auto;
        aspect-ratio: 2 / 1;
        background:#9be3ff;
        border:4px solid #333;
        position:relative;
        display:flex;
        justify-content:space-between;
    }

    .net{
        position:absolute;
        top:50%;
        left:0; right:0;
        height:4px;
        background:black;
    }

    .kitchen{
        position:absolute;
        width:100%;
        height:20%;
        background:#ffd9d9;
        opacity:0.6;
    }
    .kitchen.top{ top:0; }
    .kitchen.bottom{ bottom:0; }

    .team-area{
        width:50%;
        display:flex;
        flex-direction:column;
        justify-content:space-between;
        padding:10px;
    }

    .player{
        padding:5px 8px;
        border-radius:6px;
        background:white;
        text-align:center;
        border:2px solid transparent;
        font-size:14px;
    }

    .server{
        border:2px solid red !important;
        background:#ffecec !important;
        font-weight:bold;
    }

    .scoreboard{
        margin:10px auto;
        width:200px;
        padding:10px;
        background:white;
        text-align:center;
        font-size:24px;
        border-radius:10px;
        box-shadow:0 0 5px #0002;
    }

    .team-controls{
        display:flex;
        justify-content:space-between;
        margin-top:5px;
    }
    button{
        padding:5px 10px;
        border:none;
        border-radius:6px;
        background:#0077ff;
        color:white;
        font-size:14px;
    }
    button.red{ background:#ff5050; }

</style>

</head>
<body>

<h1>PICKLEBALL SCORE - Äá»¨C TRá»ŒNG</h1>

<div class="settings">
    <label>Äá»™i A:</label>
    <input id="teamAName" value="Team A">

    <label>TÃªn VÄV Ä‘á»™i A (pháº£i - trÃ¡i):</label>
    <input id="a1" value="A1">
    <input id="a2" value="A2">

    <label>Äá»™i B:</label>
    <input id="teamBName" value="Team B">

    <label>TÃªn VÄV Ä‘á»™i B (pháº£i - trÃ¡i):</label>
    <input id="b1" value="B1">
    <input id="b2" value="B2">

    <label>Thang Ä‘iá»ƒm:</label>
    <select id="scoreType">
        <option value="11">11 Ä‘iá»ƒm</option>
        <option value="15">15 Ä‘iá»ƒm</option>
    </select>

    <label>Luáº­t tháº¯ng:</label>
    <select id="winRule">
        <option value="touch">Cháº¡m Ä‘iá»ƒm</option>
        <option value="by2">CÃ¡ch 2 Ä‘iá»ƒm</option>
    </select>

    <label>Äá»™i giao banh trÆ°á»›c:</label>
    <select id="firstServe">
        <option value="A">Äá»™i A</option>
        <option value="B">Äá»™i B</option>
    </select>

    <button onclick="startMatch()">Báº¯t Ä‘áº§u tráº­n</button>
</div>


<!-- SÃ‚N PICKLEBALL -->
<div class="court" id="court" style="display:none;">
    <div class="kitchen top"></div>
    <div class="kitchen bottom"></div>
    <div class="net"></div>

    <!-- TEAM A -->
    <div class="team-area" id="teamA">
        <div class="player" id="A-right">A1</div>
        <div class="player" id="A-left">A2</div>
    </div>

    <!-- TEAM B -->
    <div class="team-area" id="teamB">
        <div class="player" id="B-right">B1</div>
        <div class="player" id="B-left">B2</div>
    </div>
</div>

<!-- Báº¢NG ÄIá»‚M -->
<div class="scoreboard" id="scoreBoard" style="display:none;">0-0-2</div>

<!-- NÃšT Cá»˜NG TRá»ª -->
<div style="max-width:600px; margin:0 auto; display:none;" id="controlsArea">
    <h3 id="teamANameShow"></h3>
    <div class="team-controls">
        <button onclick="addPoint('A')">+ Äiá»ƒm A</button>
        <button class="red" onclick="minusPoint('A')">- Äiá»ƒm A</button>
    </div>

    <h3 id="teamBNameShow"></h3>
    <div class="team-controls">
        <button onclick="addPoint('B')">+ Äiá»ƒm B</button>
        <button class="red" onclick="minusPoint('B')">- Äiá»ƒm B</button>
    </div>
</div>


<script>
/* -----------------------------
    BIáº¾N TRáº NG THÃI TRáº¬N
------------------------------*/
let scoreA = 0, scoreB = 0;
let serverTeam = "A";        // A hoáº·c B
let serverIndex = 0;         // 0: ngÆ°á»i pháº£i, 1: ngÆ°á»i trÃ¡i
let serveTurn = 2;           // 2 hoáº·c 1
let teamRotation = {
    A: ["right","left"],
    B: ["right","left"]
};

let started = false;

/* -----------------------------
        Báº®T Äáº¦U TRáº¬N
------------------------------*/
function startMatch(){
    started = true;

    serverTeam = document.getElementById("firstServe").value;
    serveTurn = (serverTeam === "A") ? 2 : 1;

    // set tÃªn
    document.getElementById("A-right").innerText = document.getElementById("a1").value;
    document.getElementById("A-left").innerText = document.getElementById("a2").value;
    document.getElementById("B-right").innerText = document.getElementById("b1").value;
    document.getElementById("B-left").innerText = document.getElementById("b2").value;

    document.getElementById("teamANameShow").innerText = document.getElementById("teamAName").value;
    document.getElementById("teamBNameShow").innerText = document.getElementById("teamBName").value;

    document.getElementById("court").style.display="flex";
    document.getElementById("scoreBoard").style.display="block";
    document.getElementById("controlsArea").style.display="block";

    updateUI();
}

/* -----------------------------
        Cáº¬P NHáº¬T GIAO DIá»†N
------------------------------*/
function updateUI(){
    document.getElementById("scoreBoard").innerText =
        `${scoreA}-${scoreB}-${serveTurn}`;

    // reset
    document.querySelectorAll(".player").forEach(p => p.classList.remove("server"));

    let pos = serverIndex === 0 ? "right" : "left";
    document.getElementById(`${serverTeam}-${pos}`).classList.add("server");
}

/* -----------------------------
        Cá»˜NG ÄIá»‚M
------------------------------*/
function addPoint(team){
    if(!started) return;

    let isServingTeam = (team === serverTeam);

    if(isServingTeam){
        // Äá»•i vá»‹ trÃ­ khi ghi Ä‘iá»ƒm
        serverIndex = 1 - serverIndex;

        if(team==="A") scoreA++;
        else scoreB++;
    }
    else{
        // Máº¥t quyá»n giao â†’ chuyá»ƒn ngÆ°á»i giao náº¿u serveTurn == 2
        if(serveTurn === 2){
            serveTurn = 1;
            serverIndex = 0;
        } else {
            // Ä‘á»•i Ä‘á»™i giao
            serverTeam = team;
            serveTurn = 2;
            serverIndex = 0;
        }

        if(team==="A") scoreA++;
        else scoreB++;
    }

    checkWin();
    updateUI();
}

/* -----------------------------
        TRá»ª ÄIá»‚M
------------------------------*/
function minusPoint(team){
    if(team==="A" && scoreA>0) scoreA--;
    if(team==="B" && scoreB>0) scoreB--;
    updateUI();
}

/* -----------------------------
        KIá»‚M TRA THáº®NG
------------------------------*/
function checkWin(){
    let type = document.getElementById("scoreType").value; // 11 hoáº·c 15
    let rule = document.getElementById("winRule").value;

    let target = Number(type);

    if(rule==="by2"){
        target = (type==="11") ? 15 : 21;
    }

    if(scoreA >= target || scoreB >= target){
        let winner = scoreA > scoreB ? document.getElementById("teamAName").value
                                     : document.getElementById("teamBName").value;

        alert("ğŸ‰ Äá»™i tháº¯ng: " + winner);
    }
}
</script>

</body>
</html>
