<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>PICKLEBALL SCORE - ƒê·ª®C TR·ªåNG</title>
<style>
  :root{
    --bg:#f3f6f9; --card:#fff; --muted:#6b7280;
    --teamA:#ff6b6b; --teamB:#2ba6ff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,Arial,Helvetica;background:var(--bg);-webkit-text-size-adjust:100%;}
  .wrap{max-width:980px;margin:14px auto;padding:12px;}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px}
  h1{margin:0;background:#083d9a;color:#fff;padding:10px 14px;border-radius:8px;font-size:18px}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  select,input{padding:8px;border-radius:8px;border:1px solid #d7dde6}
  .btn{padding:9px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:700}
  .btn.green{background:#00a850;color:#fff}
  .layout{display:flex;gap:12px;margin-top:12px}
  .left{width:360px;background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  .right{flex:1;background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  .teamBox{padding:10px;border-radius:8px;margin-bottom:10px;border-left:8px solid #ddd;background:#fbfbfb}
  .teamA{border-left-color:var(--teamA)} .teamB{border-left-color:var(--teamB)}
  .small{font-size:13px;color:var(--muted)}
  .bigScore{font-size:28px;font-weight:900}
  .courtWrap{display:flex;justify-content:center;align-items:center;padding:8px}
  .court{width:320px;height:520px;background:#cfeed3;border:3px solid #2b4b2b;border-radius:8px;position:relative}
  .net{position:absolute;left:0;right:0;top:50%;height:6px;background:#444}
  .kitchen.top{position:absolute;left:0;right:0;top:50%;height:72px;transform:translateY(-72px);border-top:2px dashed rgba(0,0,0,0.12);border-bottom:2px dashed rgba(0,0,0,0.12);background:rgba(255,255,0,0.04)}
  .kitchen.bottom{position:absolute;left:0;right:0;bottom:50%;height:72px;transform:translateY(72px);border-top:2px dashed rgba(0,0,0,0.12);border-bottom:2px dashed rgba(0,0,0,0.12);background:rgba(255,255,0,0.04)}
  .player{position:absolute;width:120px;height:36px;line-height:36px;border-radius:6px;text-align:center;font-weight:800;border:2px solid rgba(0,0,0,0.06);box-shadow:0 6px 14px rgba(0,0,0,0.06)}
  #A_right{right:14px;bottom:40px} #A_left{left:14px;bottom:40px}
  #B_right{right:14px;top:40px} #B_left{left:14px;top:40px}
  .A{background:#fff0f0;border-color:var(--teamA);color:var(--teamA)} .B{background:#f0fbff;border-color:var(--teamB);color:var(--teamB)}
  .mini{font-weight:900}
  .controlsRow{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .centerBoard{display:flex;flex-direction:column;align-items:center;gap:8px}
  .mainBoard{background:#fff;padding:8px 12px;border-radius:8px;font-weight:900}
  @media (max-width:880px){.layout{flex-direction:column}.left{width:100%}}
  input.small{padding:7px;border-radius:8px;border:1px solid #ddd;width:120px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>PICKLEBALL SCORE - ƒê·ª®C TR·ªåNG</h1>
    <div class="controls">
      <div class="small">Thang ƒëi·ªÉm</div>
      <select id="pointType">
        <option value="11">11</option>
        <option value="15">15</option>
      </select>

      <div class="small">Ki·ªÉu th·∫Øng</div>
      <select id="winType">
        <option value="touch">Ch·∫°m ƒëi·ªÉm</option>
        <option value="winby2">C√°ch 2</option>
      </select>

      <div class="small">ƒê·ªôi giao ƒë·∫ßu</div>
      <select id="firstServe">
        <option value="A">ƒê·ªôi A</option>
        <option value="B">ƒê·ªôi B</option>
      </select>

      <button class="btn green" onclick="startMatch()">B·∫ÆT ƒê·∫¶U</button>
    </div>
  </header>

  <div class="layout">
    <!-- left -->
    <div class="left">
      <div class="teamBox teamA">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:900">ƒê·ªôi A</div>
            <div class="small">T√™n ƒë·ªôi: <input id="teamAName" class="small" value="TEAM A"></div>
          </div>
          <div style="text-align:right">
            <div class="small">ƒêi·ªÉm</div>
            <div id="scoreA_big" class="bigScore">0</div>
          </div>
        </div>
        <div style="margin-top:8px">
          <div class="small">Ng∆∞·ªùi (ph·∫£i / tr√°i)</div>
          <div style="display:flex;gap:6px;margin-top:6px">
            <input id="A_p1" class="small" value="A - Ph·∫£i">
            <input id="A_p2" class="small" value="A - Tr√°i">
          </div>
        </div>
      </div>

      <div class="teamBox teamB">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:900">ƒê·ªôi B</div>
            <div class="small">T√™n ƒë·ªôi: <input id="teamBName" class="small" value="TEAM B"></div>
          </div>
          <div style="text-align:right">
            <div class="small">ƒêi·ªÉm</div>
            <div id="scoreB_big" class="bigScore">0</div>
          </div>
        </div>
        <div style="margin-top:8px">
          <div class="small">Ng∆∞·ªùi (ph·∫£i / tr√°i)</div>
          <div style="display:flex;gap:6px;margin-top:6px">
            <input id="B_p1" class="small" value="B - Ph·∫£i">
            <input id="B_p2" class="small" value="B - Tr√°i">
          </div>
        </div>
      </div>

      <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="small">B·∫£ng ch√≠nh (ƒê·ªôi giao tr∆∞·ªõc)</div>
          <div id="mainBoard" class="mainBoard">0 - 0 - 0</div>
          <div class="small" style="margin-top:6px;color:var(--muted)">C√∫ ph√°p: [ƒêi·ªÉm ƒë·ªôi ƒëang giao] - [ƒêi·ªÉm ƒë·ªëi ph∆∞∆°ng] - [S·ªë l∆∞·ª£t giao hi·ªán c√≥]</div>
        </div>

        <div style="text-align:right">
          <div class="small">T·ªïng</div>
          <div id="scoreTotal" class="mini">0 - 0</div>
          <div style="margin-top:8px"><button class="btn" onclick="resetAll()">RESET</button></div>
        </div>
      </div>

      <div style="margin-top:12px" class="small">
        Ghi ch√∫ ng·∫Øn:
        <ul style="margin:6px 0 0 18px;color:var(--muted)">
          <li>Ch·ªâ <b>ƒë·ªôi ƒëang giao</b> ƒë∆∞·ª£c c·ªông ƒëi·ªÉm khi b·∫•m + cho ƒë·ªôi ƒë√≥.</li>
          <li>N·∫øu b·∫•m + cho ƒë·ªôi <i>kh√¥ng</i> ƒëang giao ‚Üí ƒë·ªôi ƒëang giao m·∫•t quy·ªÅn; quy·ªÅn giao chuy·ªÉn sang ƒë·ªôi kia (kh√¥ng c·ªông ƒëi·ªÉm).</li>
          <li>M·ªói l·∫ßn ƒë·ªôi nh·∫≠n quy·ªÅn giao s·∫Ω ƒë∆∞·ª£c <b>2 l∆∞·ª£t giao</b> (s·ªë l∆∞·ª£t hi·ªán ·ªü ph·∫ßn cu·ªëi b·∫£ng ch√≠nh).</li>
          <li>M·ªói l·∫ßn ƒë·ªôi giao ghi ƒëi·ªÉm ‚Üí ng∆∞·ªùi giao ƒë·ªïi ph·∫£i‚Üîtr√°i (hi·ªÉn th·ªã b·∫±ng ph√≥ng to).</li>
        </ul>
      </div>
    </div>

    <!-- right -->
    <div class="right">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:900">S∆° ƒë·ªì s√¢n</div>
        <div style="text-align:right">
          <div class="small">Server hi·ªán t·∫°i</div>
          <div id="serverShow" class="mini">A (Ph·∫£i)</div>
        </div>
      </div>

      <div class="courtWrap">
        <div class="court" id="court">
          <div class="kitchen top"></div>
          <div class="net"></div>
          <div class="kitchen bottom"></div>

          <div id="B_left" class="player B">B1</div>
          <div id="B_right" class="player B">B2</div>
          <div id="A_left" class="player A">A1</div>
          <div id="A_right" class="player A">A2</div>
        </div>
      </div>

      <div style="display:flex;gap:14px;justify-content:center;margin-top:10px">
        <div style="text-align:center">
          <div style="font-weight:900;color:var(--teamA)">ƒê·ªôi A</div>
          <div style="margin-top:8px">
            <button class="btn" onclick="pressPlus('A')">+ ƒêi·ªÉm</button>
            <button class="btn" onclick="pressMinus('A')">‚àí</button>
          </div>
        </div>

        <div style="text-align:center">
          <div style="font-weight:900;color:var(--teamB)">ƒê·ªôi B</div>
          <div style="margin-top:8px">
            <button class="btn" onclick="pressPlus('B')">+ ƒêi·ªÉm</button>
            <button class="btn" onclick="pressMinus('B')">‚àí</button>
          </div>
        </div>
      </div>

      <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
        <button class="btn" onclick="manualSwap()">Chuy·ªÉn quy·ªÅn giao th·ªß c√¥ng</button>
        <button class="btn" onclick="showState()">Hi·ªán tr·∫°ng</button>
      </div>
    </div>
  </div>
</div>

<script>
/* tr·∫°ng th√°i */
let scoreA = 0, scoreB = 0;
let servingTeam = 'A';       // 'A' ho·∫∑c 'B'
let servingPlayer = 1;       // 1 = ph·∫£i, 2 = tr√°i
let serviceRights = 2;       // s·ªë l∆∞·ª£t giao hi·ªán c√≥ cho ƒë·ªôi ƒëang giao (m·∫∑c ƒë·ªãnh 2)
let initialServer = 'A';
let matchStarted = false;

/* c√†i ƒë·∫∑t ƒëi·ªÉm */
let maxPoint = 11;
let capPoint = 15;
let winBy2 = false;

function $(id){return document.getElementById(id)}

/* kh·ªüi tr·∫≠n */
function startMatch(){
  initialServer = $('firstServe').value;
  servingTeam = initialServer;
  servingPlayer = 1; // ph·∫£i giao ƒë·∫ßu
  serviceRights = 2; // theo v√≠ d·ª• b·∫°n y√™u c·∫ßu: ban ƒë·∫ßu 2 l∆∞·ª£t
  matchStarted = true;

  // lo·∫°i ƒëi·ªÉm
  const pt = $('pointType').value;
  maxPoint = pt === '11' ? 11 : 15;
  capPoint = pt === '11' ? 15 : 21;
  winBy2 = $('winType').value === 'winby2';

  // reset ƒëi·ªÉm
  scoreA = 0; scoreB = 0;

  updateAll();
  alert('Tr·∫≠n b·∫Øt ƒë·∫ßu. ƒê·ªôi ' + servingTeam + ' giao tr∆∞·ªõc. B·∫£ng: ' + boardText());
}

/* khi b·∫•m + cho m·ªôt ƒë·ªôi */
function pressPlus(team){
  if (!matchStarted){ alert('B·∫•m B·∫ÆT ƒê·∫¶U tr∆∞·ªõc khi ghi ƒëi·ªÉm.'); return; }

  if (team === servingTeam){
    // ƒë·ªôi ƒëang giao ƒë∆∞·ª£c c·ªông ƒëi·ªÉm
    if (team === 'A') scoreA++; else scoreB++;
    // m·ªói l·∫ßn ƒë·ªôi ƒëang giao ghi ƒëi·ªÉm -> ng∆∞·ªùi giao ƒë·ªïi v·ªã tr√≠ ph·∫£i<->tr√°i
    servingPlayer = (servingPlayer === 1) ? 2 : 1;
    updateAll();
    checkWin();
  } else {
    // ƒë·ªôi kh√¥ng giao "ghi ƒëi·ªÉm" => theo y√™u c·∫ßu: ƒë·ªôi giao m·∫•t quy·ªÅn, chuy·ªÉn quy·ªÅn giao cho ƒë·ªôi n√†y (kh√¥ng c·ªông ƒëi·ªÉm)
    passServiceTo(team);
    updateAll();
  }
}

/* tr·ª´ ƒëi·ªÉm th·ªß c√¥ng */
function pressMinus(team){
  if (team === 'A' && scoreA>0) scoreA--;
  if (team === 'B' && scoreB>0) scoreB--;
  updateAll();
}

/* truy·ªÅn quy·ªÅn giao cho ƒë·ªôi winner (kh√¥ng c·ªông ƒëi·ªÉm) */
function passServiceTo(newTeam){
  // khi ƒë·ªôi kia th·∫Øng rally (nh∆∞ng kh√¥ng ph·∫£i ƒëang giao), quy·ªÅn giao sang ƒë·ªôi m·ªõi
  servingTeam = newTeam;
  // ƒë·ªôi nh·∫≠n quy·ªÅn giao b·∫Øt ƒë·∫ßu t·ª´ ng∆∞·ªùi b√™n ph·∫£i
  servingPlayer = 1;
  // khi nh·∫≠n quy·ªÅn giao => ƒë∆∞·ª£c 2 l∆∞·ª£t (theo m√¥ t·∫£ cu·ªëi b·∫°n ƒë∆∞a)
  serviceRights = 2;
}

/* ki·ªÉm tra th·∫Øng tr·∫≠n */
function checkWin(){
  const A = scoreA, B = scoreB;
  if (!winBy2){
    if (A >= maxPoint){ announceWin('A'); return; }
    if (B >= maxPoint){ announceWin('B'); return; }
  } else {
    if (A >= maxPoint && A - B >= 2){ announceWin('A'); return; }
    if (B >= maxPoint && B - A >= 2){ announceWin('B'); return; }
    // cap
    const cap = (maxPoint === 11) ? 15 : 21;
    if (A >= cap) { announceWin('A'); return; }
    if (B >= cap) { announceWin('B'); return; }
  }
}

/* hi·ªÉn th·ªã th·∫Øng */
function announceWin(team){
  const name = team === 'A' ? ($('teamAName').value || 'ƒê·ªôi A') : ($('teamBName').value || 'ƒê·ªôi B');
  alert('üéâ ' + name + ' th·∫Øng tr·∫≠n! üéâ');
  matchStarted = false;
}

/* update t·∫•t c·∫£ UI */
function updateAll(){
  // c·∫≠p nh·∫≠t ƒëi·ªÉm l·ªõn
  $('scoreA_big').textContent = scoreA;
  $('scoreB_big').textContent = scoreB;
  $('scoreTotal').textContent = scoreA + ' - ' + scoreB;

  // c·∫≠p nh·∫≠t t√™n ng∆∞·ªùi
  $('A_right').textContent = $('A_p1').value || 'A - Ph·∫£i';
  $('A_left').textContent  = $('A_p2').value || 'A - Tr√°i';
  $('B_right').textContent = $('B_p1').value || 'B - Ph·∫£i';
  $('B_left').textContent  = $('B_p2').value || 'B - Tr√°i';

  // Hi·ªÉn th·ªã server
  $('serverShow').textContent = servingTeam + ' ( ' + (servingPlayer===1?'Ph·∫£i':'Tr√°i') + ' )';

  // main board: lu√¥n hi·ªÉn th·ªã theo quy t·∫Øc "ƒëi·ªÉm c·ªßa ƒë·ªôi ƒëang giao - ƒëi·ªÉm ƒë·ªëi ph∆∞∆°ng - serviceRights"
  let sTeamScore = servingTeam === 'A' ? scoreA : scoreB;
  let oTeamScore = servingTeam === 'A' ? scoreB : scoreA;
  $('mainBoard').textContent = `${sTeamScore} - ${oTeamScore} - ${serviceRights}`;

  // hi·ªÉn th·ªã server highlight (ph√≥ng to)
  ['A_right','A_left','B_right','B_left'].forEach(id=>{
    const el = $(id);
    el.style.transform = '';
    el.style.boxShadow = '0 6px 14px rgba(0,0,0,0.06)';
  });
  const serverId = (servingTeam === 'A' ? (servingPlayer===1? 'A_right':'A_left') : (servingPlayer===1? 'B_right':'B_left'));
  $(serverId).style.transform = 'scale(1.06)';
  $(serverId).style.boxShadow = '0 12px 28px rgba(0,0,0,0.15)';
}

/* chuy·ªÉn quy·ªÅn giao th·ªß c√¥ng */
function manualSwap(){
  servingTeam = (servingTeam === 'A') ? 'B' : 'A';
  servingPlayer = 1;
  serviceRights = 2;
  updateAll();
}

/* hi·ªÉn th·ªã tr·∫°ng th√°i (debug/help) */
function showState(){
  alert(
    'State:\n' +
    'Match started: ' + matchStarted + '\n' +
    'Serving team: ' + servingTeam + '\n' +
    'Serving player: ' + (servingPlayer===1? 'Ph·∫£i' : 'Tr√°i') + '\n' +
    'Service rights: ' + serviceRights + '\n' +
    'Score A - B: ' + scoreA + ' - ' + scoreB
  );
}

/* reset to√†n b·ªô */
function resetAll(){
  matchStarted = false;
  scoreA = 0; scoreB = 0;
  servingTeam = $('firstServe').value || 'A';
  servingPlayer = 1;
  serviceRights = 2;
  updateAll();
}

/* kh·ªüi t·∫°o ban ƒë·∫ßu */
resetAll();
</script>
</body>
</html>
