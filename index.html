<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Pickleball Tournament</title>
<style>
body{font-family:Arial;padding:20px}
nav button{margin-right:10px}
section{display:none;margin-top:20px}
section.active{display:block}
input,select,button{margin:4px;padding:6px}
</style>
</head>
<body>

<h2>QUẢN LÝ GIẢI PICKLEBALL</h2>

<nav>
  <button onclick="show('teams')">Nhập đội</button>
  <button onclick="show('groups')">Phân bảng</button>
  <button onclick="show('match')">Nhập kết quả</button>
</nav>

<!-- NHẬP ĐỘI -->
<section id="teams" class="active">
  <h3>Nhập 16 đội</h3>
  <form id="teamForm"></form>
  <button onclick="saveTeams()">Lưu danh sách</button>
</section>

<!-- PHÂN BẢNG -->
<section id="groups">
  <h3>Phân bảng A–D</h3>
  <form id="groupForm"></form>
  <button onclick="saveGroups()">Lưu phân bảng</button>
</section>

<!-- NHẬP KẾT QUẢ -->
<section id="match">
  <h3>Nhập kết quả</h3>
  <select id="round">
    <option value="bang">Vòng bảng</option>
    <option value="1.8">Vòng 1/8</option>
    <option value="bk">Bán kết</option>
    <option value="ck">Chung kết</option>
  </select><br>

  <input id="teamA" placeholder="Đội A">
  <input id="teamB" placeholder="Đội B"><br>
  <input id="score" placeholder="11-5">
  <button onclick="saveMatch()">Lưu kết quả</button>
</section>

<script>
const URL = "https://docs.google.com/spreadsheets/d/1T1zB0rH0X3WYe1ua4DuCgxlV7g_-8xUjQSQOZQ7tVYw";

/* tạo form */
const teamForm=document.getElementById("teamForm");
for(let i=1;i<=16;i++){
  teamForm.innerHTML+=`Đội ${i}: <input id="t${i}"><br>`;
}

const groupForm=document.getElementById("groupForm");
["A","B","C","D"].forEach(g=>{
  groupForm.innerHTML+=`<b>Bảng ${g}</b><br>`;
  for(let i=1;i<=4;i++){
    groupForm.innerHTML+=`<input id="${g}${i}" placeholder="Tên đội"><br>`;
  }
});

/* điều hướng */
function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* gửi dữ liệu */
function post(data){
  fetch(URL,{method:"POST",body:JSON.stringify(data)})
  .then(()=>alert("Đã lưu"));
}

function saveTeams(){
  const data={};
  for(let i=1;i<=16;i++) data["t"+i]=document.getElementById("t"+i).value;
  post({action:"teams",data});
}

function saveGroups(){
  const data={};
  ["A","B","C","D"].forEach(g=>{
    for(let i=1;i<=4;i++){
      data[g+i]=document.getElementById(g+i).value;
    }
  });
  post({action:"groups",data});
}

function saveMatch(){
  post({
    action:"match",
    round:round.value,
    teamA:teamA.value,
    teamB:teamB.value,
    score:score.value
  });
}
</script>

</body>
</html>
